schema: '2.0'
stages:
  process_town_boundaries:
    cmd: milton_maps process_town_boundaries data/raw/townssurvey_shp/TOWNSSURVEY_POLY.shp
      data/processed/town_boundaries.shp.zip
    deps:
    - path: data/raw/townssurvey_shp/TOWNSSURVEY_POLY.shp
      md5: 331b2ee589890a213b4177f52faf29c3
      size: 10503656
    - path: milton_maps/process_town_boundaries.py
      md5: 3d4943d52c6ebf6a8a891be7061af1c9
      size: 3200
    outs:
    - path: data/processed/town_boundaries.shp.zip
      md5: 6ee4705fe921677aed60ac16951939df
      size: 3996108
    - path: data/processed/town_ids.json
      md5: 2d48a7c55d1c7f2bed6aebc4385325f3
      size: 6656
  process_milton_assessor_db:
    cmd: milton_maps process_assessor_db data/raw/M189_parcels_gdb/M189_parcels_CY22_FY22_sde.gdb
      M189Assess data/processed/milton_assessor_db.pkl
    deps:
    - path: data/processed/town_ids.json
      md5: 2d48a7c55d1c7f2bed6aebc4385325f3
      size: 6656
    - path: data/raw/M189_parcels_gdb/M189_parcels_CY22_FY22_sde.gdb
      md5: 857ede6cd9f785d8e60ca2b0c071767b.dir
      size: 11740324
      nfiles: 104
    - path: milton_maps/process_assessor_db.py
      md5: bb710fd248caa129d9e03fd88b19e268
      size: 2255
    outs:
    - path: data/processed/milton_assessor_db.pkl
      md5: ecbc35ce1f81fa6031ac931a022ffbac
      size: 4393532
  process_quincy_assessor_db:
    cmd: milton_maps process_assessor_db data/raw/M243_parcels_gdb/M243_parcels_CY22_FY22_sde.gdb
      M243Assess data/processed/quincy_assessor_db.pkl
    deps:
    - path: data/processed/town_ids.json
      md5: 2d48a7c55d1c7f2bed6aebc4385325f3
      size: 6656
    - path: data/raw/M243_parcels_gdb/M243_parcels_CY22_FY22_sde.gdb
      md5: 50784f8bad42fa83e5c94f269a0803a5.dir
      size: 28882890
      nfiles: 97
    - path: milton_maps/process_assessor_db.py
      md5: bb710fd248caa129d9e03fd88b19e268
      size: 2255
    outs:
    - path: data/processed/quincy_assessor_db.pkl
      md5: dd6bc667f2e4bf7313ad3c6b78eb3190
      size: 13930741
  process_openspace:
    cmd: milton_maps process_openspace data/raw/openspace/OPENSPACE_POLY.shp data/processed/openspace.shp.zip
    deps:
    - path: data/raw/openspace/OPENSPACE_POLY.shp
      md5: 1c7a6bd1e839d56935931f09cae6ad92
      size: 58151620
    - path: milton_maps/process_openspace.py
      md5: 65fdee0742d42616616e0a6ddccfa14f
      size: 1457
    outs:
    - path: data/processed/openspace.shp.zip
      md5: 0116eb5aa457bea339c38f99209f1c94
      size: 40425372
  process_tax_parcels:
    cmd: milton_maps process_tax_parcels 
      data/raw/L3_SHP_M189_MILTON/L3_SHP_M189_Milton/M189TaxPar_CY22_FY22.shp,data/raw/L3_SHP_M243_QUINCY/L3_SHP_M243_Quincy/M243TaxPar_CY22_FY23.shp
      data/processed/milton_assessor_db.pkl,data/processed/quincy_assessor_db.pkl
      data/processed/residential_tax_parcels.pkl
    deps:
    - path: data/processed/milton_assessor_db.pkl
      md5: ecbc35ce1f81fa6031ac931a022ffbac
      size: 4393532
    - path: data/processed/quincy_assessor_db.pkl
      md5: dd6bc667f2e4bf7313ad3c6b78eb3190
      size: 13930741
    - path: data/raw/L3_SHP_M189_MILTON/L3_SHP_M189_Milton/M189TaxPar_CY22_FY22.shp
      md5: abfbc24ca43bcf63c2aadc25166c3120
      size: 3926728
    - path: data/raw/L3_SHP_M243_QUINCY/L3_SHP_M243_Quincy/M243TaxPar_CY22_FY23.shp
      md5: cbd9142e70be4d3bdfb5b8e00dd8a246
      size: 8486968
    - path: milton_maps/process_tax_parcels.py
      md5: 0bae42bfa9acb021cb791b1e0f620fa6
      size: 2061
    outs:
    - path: data/processed/residential_tax_parcels.pkl
      md5: 195b1f96c99a0e0a3e3df747dd00db1d
      size: 17540927
